const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CvfB_ERj.js","assets/index-Bp2tZEvE.css","assets/flowGraphCodeExecutionBlock-B9sbO6Et.js","assets/flowGraphGLTFDataProvider-CqkuTXD1.js"])))=>i.map(i=>d[i]);
import{ac as a,aG as at,aH as j,aI as U,aJ as rt,f as _,aK as $,aL as nt,a7 as Y,a5 as et,X as ct,V as it}from"./index-CvfB_ERj.js";import{a as st,A as D}from"./objectModelMapping-DLlzKyvJ.js";import{g as lt,a as z}from"./declarationMapper-DF1KkoQ9.js";const Z={};function pt(n,t,o){Z[`${n}/${t}`]=o}function ut(n){switch(n){case"FlowGraphPlayAnimationBlock":return async()=>(await a(async()=>{const{FlowGraphPlayAnimationBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b8);return{FlowGraphPlayAnimationBlock:t}},__vite__mapDeps([0,1]))).FlowGraphPlayAnimationBlock;case"FlowGraphStopAnimationBlock":return async()=>(await a(async()=>{const{FlowGraphStopAnimationBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b9);return{FlowGraphStopAnimationBlock:t}},__vite__mapDeps([0,1]))).FlowGraphStopAnimationBlock;case"FlowGraphPauseAnimationBlock":return async()=>(await a(async()=>{const{FlowGraphPauseAnimationBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.ba);return{FlowGraphPauseAnimationBlock:t}},__vite__mapDeps([0,1]))).FlowGraphPauseAnimationBlock;case"FlowGraphInterpolationBlock":return async()=>(await a(async()=>{const{FlowGraphInterpolationBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bb);return{FlowGraphInterpolationBlock:t}},__vite__mapDeps([0,1]))).FlowGraphInterpolationBlock;case"FlowGraphSceneReadyEventBlock":return async()=>(await a(async()=>{const{FlowGraphSceneReadyEventBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.by);return{FlowGraphSceneReadyEventBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSceneReadyEventBlock;case"FlowGraphSceneTickEventBlock":return async()=>(await a(async()=>{const{FlowGraphSceneTickEventBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bB);return{FlowGraphSceneTickEventBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSceneTickEventBlock;case"FlowGraphSendCustomEventBlock":return async()=>(await a(async()=>{const{FlowGraphSendCustomEventBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bA);return{FlowGraphSendCustomEventBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSendCustomEventBlock;case"FlowGraphReceiveCustomEventBlock":return async()=>(await a(async()=>{const{FlowGraphReceiveCustomEventBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bz);return{FlowGraphReceiveCustomEventBlock:t}},__vite__mapDeps([0,1]))).FlowGraphReceiveCustomEventBlock;case"FlowGraphMeshPickEventBlock":return async()=>(await a(async()=>{const{FlowGraphMeshPickEventBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bx);return{FlowGraphMeshPickEventBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMeshPickEventBlock;case"FlowGraphEBlock":return async()=>(await a(async()=>{const{FlowGraphEBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphEBlock:t}},__vite__mapDeps([0,1]))).FlowGraphEBlock;case"FlowGraphPIBlock":return async()=>(await a(async()=>{const{FlowGraphPiBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphPiBlock:t}},__vite__mapDeps([0,1]))).FlowGraphPiBlock;case"FlowGraphInfBlock":return async()=>(await a(async()=>{const{FlowGraphInfBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphInfBlock:t}},__vite__mapDeps([0,1]))).FlowGraphInfBlock;case"FlowGraphNaNBlock":return async()=>(await a(async()=>{const{FlowGraphNaNBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphNaNBlock:t}},__vite__mapDeps([0,1]))).FlowGraphNaNBlock;case"FlowGraphRandomBlock":return async()=>(await a(async()=>{const{FlowGraphRandomBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphRandomBlock:t}},__vite__mapDeps([0,1]))).FlowGraphRandomBlock;case"FlowGraphAddBlock":return async()=>(await a(async()=>{const{FlowGraphAddBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAddBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAddBlock;case"FlowGraphSubtractBlock":return async()=>(await a(async()=>{const{FlowGraphSubtractBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphSubtractBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSubtractBlock;case"FlowGraphMultiplyBlock":return async()=>(await a(async()=>{const{FlowGraphMultiplyBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphMultiplyBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMultiplyBlock;case"FlowGraphDivideBlock":return async()=>(await a(async()=>{const{FlowGraphDivideBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphDivideBlock:t}},__vite__mapDeps([0,1]))).FlowGraphDivideBlock;case"FlowGraphAbsBlock":return async()=>(await a(async()=>{const{FlowGraphAbsBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAbsBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAbsBlock;case"FlowGraphSignBlock":return async()=>(await a(async()=>{const{FlowGraphSignBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphSignBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSignBlock;case"FlowGraphTruncBlock":return async()=>(await a(async()=>{const{FlowGraphTruncBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphTruncBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTruncBlock;case"FlowGraphFloorBlock":return async()=>(await a(async()=>{const{FlowGraphFloorBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphFloorBlock:t}},__vite__mapDeps([0,1]))).FlowGraphFloorBlock;case"FlowGraphCeilBlock":return async()=>(await a(async()=>{const{FlowGraphCeilBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphCeilBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCeilBlock;case"FlowGraphRoundBlock":return async()=>(await a(async()=>{const{FlowGraphRoundBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphRoundBlock:t}},__vite__mapDeps([0,1]))).FlowGraphRoundBlock;case"FlowGraphFractBlock":return async()=>(await a(async()=>{const{FlowGraphFractionBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphFractionBlock:t}},__vite__mapDeps([0,1]))).FlowGraphFractionBlock;case"FlowGraphNegationBlock":return async()=>(await a(async()=>{const{FlowGraphNegationBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphNegationBlock:t}},__vite__mapDeps([0,1]))).FlowGraphNegationBlock;case"FlowGraphModuloBlock":return async()=>(await a(async()=>{const{FlowGraphModuloBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphModuloBlock:t}},__vite__mapDeps([0,1]))).FlowGraphModuloBlock;case"FlowGraphMinBlock":return async()=>(await a(async()=>{const{FlowGraphMinBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphMinBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMinBlock;case"FlowGraphMaxBlock":return async()=>(await a(async()=>{const{FlowGraphMaxBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphMaxBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMaxBlock;case"FlowGraphClampBlock":return async()=>(await a(async()=>{const{FlowGraphClampBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphClampBlock:t}},__vite__mapDeps([0,1]))).FlowGraphClampBlock;case"FlowGraphSaturateBlock":return async()=>(await a(async()=>{const{FlowGraphSaturateBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphSaturateBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSaturateBlock;case"FlowGraphMathInterpolationBlock":return async()=>(await a(async()=>{const{FlowGraphMathInterpolationBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphMathInterpolationBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMathInterpolationBlock;case"FlowGraphEqualityBlock":return async()=>(await a(async()=>{const{FlowGraphEqualityBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphEqualityBlock:t}},__vite__mapDeps([0,1]))).FlowGraphEqualityBlock;case"FlowGraphLessThanBlock":return async()=>(await a(async()=>{const{FlowGraphLessThanBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphLessThanBlock:t}},__vite__mapDeps([0,1]))).FlowGraphLessThanBlock;case"FlowGraphLessThanOrEqualBlock":return async()=>(await a(async()=>{const{FlowGraphLessThanOrEqualBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphLessThanOrEqualBlock:t}},__vite__mapDeps([0,1]))).FlowGraphLessThanOrEqualBlock;case"FlowGraphGreaterThanBlock":return async()=>(await a(async()=>{const{FlowGraphGreaterThanBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphGreaterThanBlock:t}},__vite__mapDeps([0,1]))).FlowGraphGreaterThanBlock;case"FlowGraphGreaterThanOrEqualBlock":return async()=>(await a(async()=>{const{FlowGraphGreaterThanOrEqualBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphGreaterThanOrEqualBlock:t}},__vite__mapDeps([0,1]))).FlowGraphGreaterThanOrEqualBlock;case"FlowGraphIsNaNBlock":return async()=>(await a(async()=>{const{FlowGraphIsNanBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphIsNanBlock:t}},__vite__mapDeps([0,1]))).FlowGraphIsNanBlock;case"FlowGraphIsInfBlock":return async()=>(await a(async()=>{const{FlowGraphIsInfinityBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphIsInfinityBlock:t}},__vite__mapDeps([0,1]))).FlowGraphIsInfinityBlock;case"FlowGraphDegToRadBlock":return async()=>(await a(async()=>{const{FlowGraphDegToRadBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphDegToRadBlock:t}},__vite__mapDeps([0,1]))).FlowGraphDegToRadBlock;case"FlowGraphRadToDegBlock":return async()=>(await a(async()=>{const{FlowGraphRadToDegBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphRadToDegBlock:t}},__vite__mapDeps([0,1]))).FlowGraphRadToDegBlock;case"FlowGraphSinBlock":return async()=>(await a(async()=>{const{FlowGraphSinBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphSinBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSinBlock;case"FlowGraphCosBlock":return async()=>(await a(async()=>{const{FlowGraphCosBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphCosBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCosBlock;case"FlowGraphTanBlock":return async()=>(await a(async()=>{const{FlowGraphTanBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphTanBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTanBlock;case"FlowGraphASinBlock":return async()=>(await a(async()=>{const{FlowGraphAsinBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAsinBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAsinBlock;case"FlowGraphACosBlock":return async()=>(await a(async()=>{const{FlowGraphAcosBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAcosBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAcosBlock;case"FlowGraphATanBlock":return async()=>(await a(async()=>{const{FlowGraphAtanBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAtanBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAtanBlock;case"FlowGraphATan2Block":return async()=>(await a(async()=>{const{FlowGraphAtan2Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAtan2Block:t}},__vite__mapDeps([0,1]))).FlowGraphAtan2Block;case"FlowGraphSinhBlock":return async()=>(await a(async()=>{const{FlowGraphSinhBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphSinhBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSinhBlock;case"FlowGraphCoshBlock":return async()=>(await a(async()=>{const{FlowGraphCoshBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphCoshBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCoshBlock;case"FlowGraphTanhBlock":return async()=>(await a(async()=>{const{FlowGraphTanhBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphTanhBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTanhBlock;case"FlowGraphASinhBlock":return async()=>(await a(async()=>{const{FlowGraphAsinhBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAsinhBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAsinhBlock;case"FlowGraphACoshBlock":return async()=>(await a(async()=>{const{FlowGraphAcoshBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAcoshBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAcoshBlock;case"FlowGraphATanhBlock":return async()=>(await a(async()=>{const{FlowGraphAtanhBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphAtanhBlock:t}},__vite__mapDeps([0,1]))).FlowGraphAtanhBlock;case"FlowGraphExponentialBlock":return async()=>(await a(async()=>{const{FlowGraphExpBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphExpBlock:t}},__vite__mapDeps([0,1]))).FlowGraphExpBlock;case"FlowGraphLogBlock":return async()=>(await a(async()=>{const{FlowGraphLogBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphLogBlock:t}},__vite__mapDeps([0,1]))).FlowGraphLogBlock;case"FlowGraphLog2Block":return async()=>(await a(async()=>{const{FlowGraphLog2Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphLog2Block:t}},__vite__mapDeps([0,1]))).FlowGraphLog2Block;case"FlowGraphLog10Block":return async()=>(await a(async()=>{const{FlowGraphLog10Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphLog10Block:t}},__vite__mapDeps([0,1]))).FlowGraphLog10Block;case"FlowGraphSquareRootBlock":return async()=>(await a(async()=>{const{FlowGraphSquareRootBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphSquareRootBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSquareRootBlock;case"FlowGraphPowerBlock":return async()=>(await a(async()=>{const{FlowGraphPowerBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphPowerBlock:t}},__vite__mapDeps([0,1]))).FlowGraphPowerBlock;case"FlowGraphCubeRootBlock":return async()=>(await a(async()=>{const{FlowGraphCubeRootBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphCubeRootBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCubeRootBlock;case"FlowGraphBitwiseAndBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseAndBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphBitwiseAndBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBitwiseAndBlock;case"FlowGraphBitwiseOrBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseOrBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphBitwiseOrBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBitwiseOrBlock;case"FlowGraphBitwiseNotBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseNotBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphBitwiseNotBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBitwiseNotBlock;case"FlowGraphBitwiseXorBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseXorBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphBitwiseXorBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBitwiseXorBlock;case"FlowGraphBitwiseLeftShiftBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseLeftShiftBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphBitwiseLeftShiftBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBitwiseLeftShiftBlock;case"FlowGraphBitwiseRightShiftBlock":return async()=>(await a(async()=>{const{FlowGraphBitwiseRightShiftBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphBitwiseRightShiftBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBitwiseRightShiftBlock;case"FlowGraphLengthBlock":return async()=>(await a(async()=>{const{FlowGraphLengthBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphLengthBlock:t}},__vite__mapDeps([0,1]))).FlowGraphLengthBlock;case"FlowGraphNormalizeBlock":return async()=>(await a(async()=>{const{FlowGraphNormalizeBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphNormalizeBlock:t}},__vite__mapDeps([0,1]))).FlowGraphNormalizeBlock;case"FlowGraphDotBlock":return async()=>(await a(async()=>{const{FlowGraphDotBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphDotBlock:t}},__vite__mapDeps([0,1]))).FlowGraphDotBlock;case"FlowGraphCrossBlock":return async()=>(await a(async()=>{const{FlowGraphCrossBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphCrossBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCrossBlock;case"FlowGraphRotate2DBlock":return async()=>(await a(async()=>{const{FlowGraphRotate2DBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphRotate2DBlock:t}},__vite__mapDeps([0,1]))).FlowGraphRotate2DBlock;case"FlowGraphRotate3DBlock":return async()=>(await a(async()=>{const{FlowGraphRotate3DBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphRotate3DBlock:t}},__vite__mapDeps([0,1]))).FlowGraphRotate3DBlock;case"FlowGraphTransposeBlock":return async()=>(await a(async()=>{const{FlowGraphTransposeBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bp);return{FlowGraphTransposeBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTransposeBlock;case"FlowGraphDeterminantBlock":return async()=>(await a(async()=>{const{FlowGraphDeterminantBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bp);return{FlowGraphDeterminantBlock:t}},__vite__mapDeps([0,1]))).FlowGraphDeterminantBlock;case"FlowGraphInvertMatrixBlock":return async()=>(await a(async()=>{const{FlowGraphInvertMatrixBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bp);return{FlowGraphInvertMatrixBlock:t}},__vite__mapDeps([0,1]))).FlowGraphInvertMatrixBlock;case"FlowGraphMatrixMultiplicationBlock":return async()=>(await a(async()=>{const{FlowGraphMatrixMultiplicationBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bp);return{FlowGraphMatrixMultiplicationBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMatrixMultiplicationBlock;case"FlowGraphBranchBlock":return async()=>(await a(async()=>{const{FlowGraphBranchBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.aW);return{FlowGraphBranchBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBranchBlock;case"FlowGraphSetDelayBlock":return async()=>(await a(async()=>{const{FlowGraphSetDelayBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b6);return{FlowGraphSetDelayBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSetDelayBlock;case"FlowGraphCancelDelayBlock":return async()=>(await a(async()=>{const{FlowGraphCancelDelayBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b7);return{FlowGraphCancelDelayBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCancelDelayBlock;case"FlowGraphCallCounterBlock":return async()=>(await a(async()=>{const{FlowGraphCallCounterBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b1);return{FlowGraphCallCounterBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCallCounterBlock;case"FlowGraphDebounceBlock":return async()=>(await a(async()=>{const{FlowGraphDebounceBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b3);return{FlowGraphDebounceBlock:t}},__vite__mapDeps([0,1]))).FlowGraphDebounceBlock;case"FlowGraphThrottleBlock":return async()=>(await a(async()=>{const{FlowGraphThrottleBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.aZ);return{FlowGraphThrottleBlock:t}},__vite__mapDeps([0,1]))).FlowGraphThrottleBlock;case"FlowGraphDoNBlock":return async()=>(await a(async()=>{const{FlowGraphDoNBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.aX);return{FlowGraphDoNBlock:t}},__vite__mapDeps([0,1]))).FlowGraphDoNBlock;case"FlowGraphFlipFlopBlock":return async()=>(await a(async()=>{const{FlowGraphFlipFlopBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b4);return{FlowGraphFlipFlopBlock:t}},__vite__mapDeps([0,1]))).FlowGraphFlipFlopBlock;case"FlowGraphForLoopBlock":return async()=>(await a(async()=>{const{FlowGraphForLoopBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.aY);return{FlowGraphForLoopBlock:t}},__vite__mapDeps([0,1]))).FlowGraphForLoopBlock;case"FlowGraphMultiGateBlock":return async()=>(await a(async()=>{const{FlowGraphMultiGateBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.a_);return{FlowGraphMultiGateBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMultiGateBlock;case"FlowGraphSequenceBlock":return async()=>(await a(async()=>{const{FlowGraphSequenceBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b5);return{FlowGraphSequenceBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSequenceBlock;case"FlowGraphSwitchBlock":return async()=>(await a(async()=>{const{FlowGraphSwitchBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.a$);return{FlowGraphSwitchBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSwitchBlock;case"FlowGraphWaitAllBlock":return async()=>(await a(async()=>{const{FlowGraphWaitAllBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b0);return{FlowGraphWaitAllBlock:t}},__vite__mapDeps([0,1]))).FlowGraphWaitAllBlock;case"FlowGraphWhileLoopBlock":return async()=>(await a(async()=>{const{FlowGraphWhileLoopBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.b2);return{FlowGraphWhileLoopBlock:t}},__vite__mapDeps([0,1]))).FlowGraphWhileLoopBlock;case"FlowGraphConsoleLogBlock":return async()=>(await a(async()=>{const{FlowGraphConsoleLogBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.aV);return{FlowGraphConsoleLogBlock:t}},__vite__mapDeps([0,1]))).FlowGraphConsoleLogBlock;case"FlowGraphConditionalBlock":return async()=>(await a(async()=>{const{FlowGraphConditionalDataBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.be);return{FlowGraphConditionalDataBlock:t}},__vite__mapDeps([0,1]))).FlowGraphConditionalDataBlock;case"FlowGraphConstantBlock":return async()=>(await a(async()=>{const{FlowGraphConstantBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bk);return{FlowGraphConstantBlock:t}},__vite__mapDeps([0,1]))).FlowGraphConstantBlock;case"FlowGraphTransformCoordinatesSystemBlock":return async()=>(await a(async()=>{const{FlowGraphTransformCoordinatesSystemBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bh);return{FlowGraphTransformCoordinatesSystemBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTransformCoordinatesSystemBlock;case"FlowGraphGetAssetBlock":return async()=>(await a(async()=>{const{FlowGraphGetAssetBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bl);return{FlowGraphGetAssetBlock:t}},__vite__mapDeps([0,1]))).FlowGraphGetAssetBlock;case"FlowGraphGetPropertyBlock":return async()=>(await a(async()=>{const{FlowGraphGetPropertyBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bi);return{FlowGraphGetPropertyBlock:t}},__vite__mapDeps([0,1]))).FlowGraphGetPropertyBlock;case"FlowGraphSetPropertyBlock":return async()=>(await a(async()=>{const{FlowGraphSetPropertyBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bj);return{FlowGraphSetPropertyBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSetPropertyBlock;case"FlowGraphGetVariableBlock":return async()=>(await a(async()=>{const{FlowGraphGetVariableBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bf);return{FlowGraphGetVariableBlock:t}},__vite__mapDeps([0,1]))).FlowGraphGetVariableBlock;case"FlowGraphSetVariableBlock":return async()=>(await a(async()=>{const{FlowGraphSetVariableBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bg);return{FlowGraphSetVariableBlock:t}},__vite__mapDeps([0,1]))).FlowGraphSetVariableBlock;case"FlowGraphJsonPointerParserBlock":return async()=>(await a(async()=>{const{FlowGraphJsonPointerParserBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.br);return{FlowGraphJsonPointerParserBlock:t}},__vite__mapDeps([0,1]))).FlowGraphJsonPointerParserBlock;case"FlowGraphLeadingZerosBlock":return async()=>(await a(async()=>{const{FlowGraphLeadingZerosBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphLeadingZerosBlock:t}},__vite__mapDeps([0,1]))).FlowGraphLeadingZerosBlock;case"FlowGraphTrailingZerosBlock":return async()=>(await a(async()=>{const{FlowGraphTrailingZerosBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphTrailingZerosBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTrailingZerosBlock;case"FlowGraphOneBitsCounterBlock":return async()=>(await a(async()=>{const{FlowGraphOneBitsCounterBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bn);return{FlowGraphOneBitsCounterBlock:t}},__vite__mapDeps([0,1]))).FlowGraphOneBitsCounterBlock;case"FlowGraphCombineVector2Block":return async()=>(await a(async()=>{const{FlowGraphCombineVector2Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphCombineVector2Block:t}},__vite__mapDeps([0,1]))).FlowGraphCombineVector2Block;case"FlowGraphCombineVector3Block":return async()=>(await a(async()=>{const{FlowGraphCombineVector3Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphCombineVector3Block:t}},__vite__mapDeps([0,1]))).FlowGraphCombineVector3Block;case"FlowGraphCombineVector4Block":return async()=>(await a(async()=>{const{FlowGraphCombineVector4Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphCombineVector4Block:t}},__vite__mapDeps([0,1]))).FlowGraphCombineVector4Block;case"FlowGraphCombineMatrixBlock":return async()=>(await a(async()=>{const{FlowGraphCombineMatrixBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphCombineMatrixBlock:t}},__vite__mapDeps([0,1]))).FlowGraphCombineMatrixBlock;case"FlowGraphExtractVector2Block":return async()=>(await a(async()=>{const{FlowGraphExtractVector2Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphExtractVector2Block:t}},__vite__mapDeps([0,1]))).FlowGraphExtractVector2Block;case"FlowGraphExtractVector3Block":return async()=>(await a(async()=>{const{FlowGraphExtractVector3Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphExtractVector3Block:t}},__vite__mapDeps([0,1]))).FlowGraphExtractVector3Block;case"FlowGraphExtractVector4Block":return async()=>(await a(async()=>{const{FlowGraphExtractVector4Block:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphExtractVector4Block:t}},__vite__mapDeps([0,1]))).FlowGraphExtractVector4Block;case"FlowGraphExtractMatrixBlock":return async()=>(await a(async()=>{const{FlowGraphExtractMatrixBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bo);return{FlowGraphExtractMatrixBlock:t}},__vite__mapDeps([0,1]))).FlowGraphExtractMatrixBlock;case"FlowGraphTransformVectorBlock":return async()=>(await a(async()=>{const{FlowGraphTransformBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphTransformBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTransformBlock;case"FlowGraphTransformCoordinatesBlock":return async()=>(await a(async()=>{const{FlowGraphTransformCoordinatesBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bq);return{FlowGraphTransformCoordinatesBlock:t}},__vite__mapDeps([0,1]))).FlowGraphTransformCoordinatesBlock;case"FlowGraphMatrixDecompose":return async()=>(await a(async()=>{const{FlowGraphMatrixDecomposeBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bp);return{FlowGraphMatrixDecomposeBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMatrixDecomposeBlock;case"FlowGraphMatrixCompose":return async()=>(await a(async()=>{const{FlowGraphMatrixComposeBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bp);return{FlowGraphMatrixComposeBlock:t}},__vite__mapDeps([0,1]))).FlowGraphMatrixComposeBlock;case"FlowGraphBooleanToFloat":return async()=>(await a(async()=>{const{FlowGraphBooleanToFloat:t}=await import("./index-CvfB_ERj.js").then(o=>o.bs);return{FlowGraphBooleanToFloat:t}},__vite__mapDeps([0,1]))).FlowGraphBooleanToFloat;case"FlowGraphBooleanToInt":return async()=>(await a(async()=>{const{FlowGraphBooleanToInt:t}=await import("./index-CvfB_ERj.js").then(o=>o.bs);return{FlowGraphBooleanToInt:t}},__vite__mapDeps([0,1]))).FlowGraphBooleanToInt;case"FlowGraphFloatToBoolean":return async()=>(await a(async()=>{const{FlowGraphFloatToBoolean:t}=await import("./index-CvfB_ERj.js").then(o=>o.bs);return{FlowGraphFloatToBoolean:t}},__vite__mapDeps([0,1]))).FlowGraphFloatToBoolean;case"FlowGraphIntToBoolean":return async()=>(await a(async()=>{const{FlowGraphIntToBoolean:t}=await import("./index-CvfB_ERj.js").then(o=>o.bs);return{FlowGraphIntToBoolean:t}},__vite__mapDeps([0,1]))).FlowGraphIntToBoolean;case"FlowGraphIntToFloat":return async()=>(await a(async()=>{const{FlowGraphIntToFloat:t}=await import("./index-CvfB_ERj.js").then(o=>o.bs);return{FlowGraphIntToFloat:t}},__vite__mapDeps([0,1]))).FlowGraphIntToFloat;case"FlowGraphFloatToInt":return async()=>(await a(async()=>{const{FlowGraphFloatToInt:t}=await import("./index-CvfB_ERj.js").then(o=>o.bs);return{FlowGraphFloatToInt:t}},__vite__mapDeps([0,1]))).FlowGraphFloatToInt;case"FlowGraphEasingBlock":return async()=>(await a(async()=>{const{FlowGraphEasingBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bc);return{FlowGraphEasingBlock:t}},__vite__mapDeps([0,1]))).FlowGraphEasingBlock;case"FlowGraphBezierCurveEasing":return async()=>(await a(async()=>{const{FlowGraphBezierCurveEasingBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bd);return{FlowGraphBezierCurveEasingBlock:t}},__vite__mapDeps([0,1]))).FlowGraphBezierCurveEasingBlock;case"FlowGraphPointerOverEventBlock":return async()=>(await a(async()=>{const{FlowGraphPointerOverEventBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bD);return{FlowGraphPointerOverEventBlock:t}},__vite__mapDeps([0,1]))).FlowGraphPointerOverEventBlock;case"FlowGraphPointerOutEventBlock":return async()=>(await a(async()=>{const{FlowGraphPointerOutEventBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bC);return{FlowGraphPointerOutEventBlock:t}},__vite__mapDeps([0,1]))).FlowGraphPointerOutEventBlock;case"FlowGraphContextBlock":return async()=>(await a(async()=>{const{FlowGraphContextBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bt);return{FlowGraphContextBlock:t}},__vite__mapDeps([0,1]))).FlowGraphContextBlock;case"FlowGraphArrayIndexBlock":return async()=>(await a(async()=>{const{FlowGraphArrayIndexBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bu);return{FlowGraphArrayIndexBlock:t}},__vite__mapDeps([0,1]))).FlowGraphArrayIndexBlock;case"FlowGraphCodeExecutionBlock":return async()=>(await a(async()=>{const{FlowGraphCodeExecutionBlock:t}=await import("./flowGraphCodeExecutionBlock-B9sbO6Et.js");return{FlowGraphCodeExecutionBlock:t}},__vite__mapDeps([2,0,1]))).FlowGraphCodeExecutionBlock;case"FlowGraphIndexOfBlock":return async()=>(await a(async()=>{const{FlowGraphIndexOfBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bv);return{FlowGraphIndexOfBlock:t}},__vite__mapDeps([0,1]))).FlowGraphIndexOfBlock;case"FlowGraphFunctionReference":return async()=>(await a(async()=>{const{FlowGraphFunctionReferenceBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bw);return{FlowGraphFunctionReferenceBlock:t}},__vite__mapDeps([0,1]))).FlowGraphFunctionReferenceBlock;case"FlowGraphDataSwitchBlock":return async()=>(await a(async()=>{const{FlowGraphDataSwitchBlock:t}=await import("./index-CvfB_ERj.js").then(o=>o.bm);return{FlowGraphDataSwitchBlock:t}},__vite__mapDeps([0,1]))).FlowGraphDataSwitchBlock;default:if(Z[n])return Z[n];throw new Error(`Unknown block name ${n}`)}}function ht(n,t){for(const o of n)for(const r of o.dataOutputs)if(r.uniqueId===t)return r;throw new Error("Could not find data out connection with unique id "+t)}function wt(n,t){for(const o of n)if(o instanceof j){for(const r of o.signalInputs)if(r.uniqueId===t)return r}throw new Error("Could not find signal in connection with unique id "+t)}async function _t(n,t){const o=await Promise.all(n.allBlocks.map(async r=>ut(r.className)()));return Gt(n,t,o)}function Gt(n,t,o){const r=t.coordinator.createGraph(),e=[],i=t.valueParseFunction??U;for(let c=0;c<n.allBlocks.length;c++){const s=n.allBlocks[c],l=Ft(s,{scene:t.coordinator.config.scene,pathConverter:t.pathConverter,assetsContainer:t.coordinator.config.scene,valueParseFunction:i},o[c]);e.push(l),l instanceof at&&r.addEventBlock(l)}for(const c of e){for(const s of c.dataInputs)for(const l of s.connectedPointIds){const k=ht(e,l);s.connectTo(k)}if(c instanceof j)for(const s of c.signalOutputs)for(const l of s.connectedPointIds){const k=wt(e,l);s.connectTo(k)}}for(const c of n.executionContexts)kt(c,{graph:r,valueParseFunction:i},n.rightHanded);return r}function kt(n,t,o){var c,s,l,k,G,v,m,L,O,C;const r=t.graph.createContext();n.enableLogging&&(r.enableLogging=!0),r.treatDataAsRightHanded=o||!1;const e=t.valueParseFunction??U;r.uniqueId=n.uniqueId;const i=r.getScene();if(n._assetsContext){const u=n._assetsContext,T={meshes:(c=u.meshes)==null?void 0:c.map(p=>i.getMeshById(p)),lights:(s=u.lights)==null?void 0:s.map(p=>i.getLightByName(p)),cameras:(l=u.cameras)==null?void 0:l.map(p=>i.getCameraByName(p)),materials:(k=u.materials)==null?void 0:k.map(p=>i.getMaterialById(p)),textures:(G=u.textures)==null?void 0:G.map(p=>i.getTextureByName(p)),animations:(v=u.animations)==null?void 0:v.map(p=>i.animations.find(W=>W.name===p)),skeletons:(m=u.skeletons)==null?void 0:m.map(p=>i.getSkeletonByName(p)),particleSystems:(L=u.particleSystems)==null?void 0:L.map(p=>i.getParticleSystemById(p)),animationGroups:(O=u.animationGroups)==null?void 0:O.map(p=>i.getAnimationGroupByName(p)),transformNodes:(C=u.transformNodes)==null?void 0:C.map(p=>i.getTransformNodeById(p)),rootNodes:[],multiMaterials:[],morphTargetManagers:[],geometries:[],actionManagers:[],environmentTexture:null,postProcesses:[],sounds:null,effectLayers:[],layers:[],reflectionProbes:[],lensFlareSystems:[],proceduralTextures:[],getNodes:function(){throw new Error("Function not implemented.")}};r.assetsContext=T}for(const u in n._userVariables){const T=e(u,n._userVariables,r.assetsContext,i);r.userVariables[u]=T}for(const u in n._connectionValues){const T=e(u,n._connectionValues,r.assetsContext,i);r._setConnectionValueByKey(u,T)}return r}function Ft(n,t,o){const r={},e=t.valueParseFunction??U;if(n.config)for(const c in n.config)r[c]=e(c,n.config,t.assetsContainer||t.scene,t.scene);if(rt(n.className)){if(!t.pathConverter)throw new Error("Path converter is required for this block");r.pathConverter=t.pathConverter}const i=new o(r);i.uniqueId=n.uniqueId;for(let c=0;c<n.dataInputs.length;c++){const s=i.getDataInput(n.dataInputs[c].name);if(s)s.deserialize(n.dataInputs[c]);else throw new Error("Could not find data input with name "+n.dataInputs[c].name+" in block "+n.className)}for(let c=0;c<n.dataOutputs.length;c++){const s=i.getDataOutput(n.dataOutputs[c].name);if(s)s.deserialize(n.dataOutputs[c]);else throw new Error("Could not find data output with name "+n.dataOutputs[c].name+" in block "+n.className)}return i.metadata=n.metadata,i.deserialize&&i.deserialize(n),i}const Bt={float:{length:1,flowGraphType:"number",elementType:"number"},bool:{length:1,flowGraphType:"boolean",elementType:"boolean"},float2:{length:2,flowGraphType:"Vector2",elementType:"number"},float3:{length:3,flowGraphType:"Vector3",elementType:"number"},float4:{length:4,flowGraphType:"Vector4",elementType:"number"},float4x4:{length:16,flowGraphType:"Matrix",elementType:"number"},float2x2:{length:4,flowGraphType:"Matrix2D",elementType:"number"},float3x3:{length:9,flowGraphType:"Matrix3D",elementType:"number"},int:{length:1,flowGraphType:"FlowGraphInteger",elementType:"number"}};class dt{constructor(t,o,r){this._interactivityGraph=t,this._gltf=o,this._loader=r,this._types=[],this._mappings=[],this._staticVariables=[],this._events=[],this._internalEventsCounter=0,this._nodes=[],this._parseTypes(),this._parseDeclarations(),this._parseVariables(),this._parseEvents(),this._parseNodes()}get arrays(){return{types:this._types,mappings:this._mappings,staticVariables:this._staticVariables,events:this._events,nodes:this._nodes}}_parseTypes(){if(this._interactivityGraph.types)for(const t of this._interactivityGraph.types)this._types.push(Bt[t.signature])}_parseDeclarations(){if(this._interactivityGraph.declarations)for(const t of this._interactivityGraph.declarations){const o=lt(t);if(!o)throw _.Error(["No mapping found for declaration",t]),new Error("Error parsing declarations");this._mappings.push({flowGraphMapping:o,fullOperationName:t.extension?t.op+":"+t.extension:t.op})}}_parseVariables(){if(this._interactivityGraph.variables)for(const t of this._interactivityGraph.variables){const o=this._parseVariable(t);this._staticVariables.push(o)}}_parseVariable(t,o){const r=this._types[t.type];if(!r)throw _.Error(["No type found for variable",t]),new Error("Error parsing variables");if(t.value&&t.value.length!==r.length)throw _.Error(["Invalid value length for variable",t,r]),new Error("Error parsing variables");const e=t.value||[];if(!e.length)switch(r.flowGraphType){case"boolean":e.push(!1);break;case"FlowGraphInteger":e.push(0);break;case"number":e.push(NaN);break;case"Vector2":e.push(NaN,NaN);break;case"Vector3":e.push(NaN,NaN,NaN);break;case"Vector4":case"Matrix2D":case"Quaternion":e.fill(NaN,0,4);break;case"Matrix":e.fill(NaN,0,16);break;case"Matrix3D":e.fill(NaN,0,9);break}return{type:r.flowGraphType,value:o?o(e,this):e}}_parseEvents(){if(this._interactivityGraph.events)for(const t of this._interactivityGraph.events){const o={eventId:t.id||"internalEvent_"+this._internalEventsCounter++};t.values&&(o.eventData=Object.keys(t.values).map(r=>{var s;const e=(s=t.values)==null?void 0:s[r];if(!e)throw _.Error(["No value found for event key",r]),new Error("Error parsing events");const i=this._types[e.type];if(!i)throw _.Error(["No type found for event value",e]),new Error("Error parsing events");const c=typeof e.value<"u"?this._parseVariable(e):void 0;return{id:r,type:i.flowGraphType,eventData:!0,value:c}})),this._events.push(o)}}_parseNodes(){if(this._interactivityGraph.nodes)for(const t of this._interactivityGraph.nodes){if(typeof t.declaration!="number")throw _.Error(["No declaration found for node",t]),new Error("Error parsing nodes");const o=this._mappings[t.declaration];if(!o)throw _.Error(["No mapping found for node",t]),new Error("Error parsing nodes");if(o.flowGraphMapping.validation&&!o.flowGraphMapping.validation(t,this._interactivityGraph,this._gltf))throw new Error(`Error validating interactivity node ${t}`);const r=[];for(const e of o.flowGraphMapping.blocks){const i=this._getEmptyBlock(e,o.fullOperationName);this._parseNodeConfiguration(t,i,o.flowGraphMapping,e),r.push(i)}this._nodes.push({blocks:r,fullOperationName:o.fullOperationName})}}_getEmptyBlock(t,o){return{uniqueId:$(),className:t,dataInputs:[],dataOutputs:[],signalInputs:[],signalOutputs:[],config:{},type:o,metadata:{}}}_parseNodeConfiguration(t,o,r,e){const i=o.config;t.configuration&&Object.keys(t.configuration).forEach(c=>{var G,v;const s=(G=t.configuration)==null?void 0:G[c];if(!s)throw _.Error(["No value found for node configuration",c]),new Error("Error parsing node configuration");const l=(v=r.configuration)==null?void 0:v[c];if(l&&l.toBlock?l.toBlock===e:r.blocks.indexOf(e)===0){const m=(l==null?void 0:l.name)||c;(!s||typeof s.value>"u")&&typeof(l==null?void 0:l.defaultValue)<"u"?i[m]={value:l.defaultValue}:s.value.length>=1?i[m]={value:s.value.length===1?s.value[0]:s.value}:_.Warn(["Invalid value for node configuration",s]),l&&l.dataTransformer&&(i[m].value=l.dataTransformer([i[m].value],this)[0])}})}_parseNodeConnections(t){var o,r,e,i,c,s,l,k,G,v,m,L,O,C,u,T,p,W,X;for(let N=0;N<this._nodes.length;N++){const b=(o=this._interactivityGraph.nodes)==null?void 0:o[N];if(!b)throw _.Error(["No node found for interactivity node",this._nodes[N]]),new Error("Error parsing node connections");const I=this._nodes[N],f=this._mappings[b.declaration];if(!f)throw _.Error(["No mapping found for node",b]),new Error("Error parsing node connections");const J=b.flows||{},tt=Object.keys(J).sort();for(const w of tt){const F=J[w],h=(e=(r=f.flowGraphMapping.outputs)==null?void 0:r.flows)==null?void 0:e[w],R=(h==null?void 0:h.name)||w,x=this._createNewSocketConnection(R,!0);(h&&h.toBlock&&I.blocks.find(E=>E.className===h.toBlock)||I.blocks[0]).signalOutputs.push(x);const H=F.node,B=this._nodes[H];if(!B)throw _.Error(["No node found for input node id",H]),new Error("Error parsing node connections");const g=z(B.fullOperationName);if(!g)throw _.Error(["No mapping found for input node",B]),new Error("Error parsing node connections");let d=(c=(i=g.inputs)==null?void 0:i.flows)==null?void 0:c[F.socket||"in"],A=!1;if(!d)for(const E in(s=g.inputs)==null?void 0:s.flows)E.startsWith("[")&&E.endsWith("]")&&(A=!0,d=(k=(l=g.inputs)==null?void 0:l.flows)==null?void 0:k[E]);const y=d?A?d.name.replace("$1",F.socket||""):d.name:F.socket||"in",M=d&&d.toBlock&&B.blocks.find(E=>E.className===d.toBlock)||B.blocks[0];let P=M.signalInputs.find(E=>E.name===y);P||(P=this._createNewSocketConnection(y),M.signalInputs.push(P)),P.connectedPointIds.push(x.uniqueId),x.connectedPointIds.push(P.uniqueId)}const Q=b.values||{},ot=Object.keys(Q);for(const w of ot){const F=Q[w];let h=(v=(G=f.flowGraphMapping.inputs)==null?void 0:G.values)==null?void 0:v[w],R=!1;if(!h)for(const B in(m=f.flowGraphMapping.inputs)==null?void 0:m.values)B.startsWith("[")&&B.endsWith("]")&&(R=!0,h=(O=(L=f.flowGraphMapping.inputs)==null?void 0:L.values)==null?void 0:O[B]);const x=h?R?h.name.replace("$1",w):h.name:w,S=this._createNewSocketConnection(x);if((h&&h.toBlock&&I.blocks.find(B=>B.className===h.toBlock)||I.blocks[0]).dataInputs.push(S),F.value!==void 0){const B=this._parseVariable(F,h&&h.dataTransformer);t._connectionValues[S.uniqueId]=B}else if(typeof F.node<"u"){const B=F.node,g=F.socket||"value",d=this._nodes[B];if(!d)throw _.Error(["No node found for output socket reference",F]),new Error("Error parsing node connections");const A=z(d.fullOperationName);if(!A)throw _.Error(["No mapping found for output socket reference",F]),new Error("Error parsing node connections");let y=(u=(C=A.outputs)==null?void 0:C.values)==null?void 0:u[g],M=!1;if(!y)for(const V in(T=A.outputs)==null?void 0:T.values)V.startsWith("[")&&V.endsWith("]")&&(M=!0,y=(W=(p=A.outputs)==null?void 0:p.values)==null?void 0:W[V]);const P=y?M?y.name.replace("$1",g):y==null?void 0:y.name:g,E=y&&y.toBlock&&d.blocks.find(V=>V.className===y.toBlock)||d.blocks[0];let q=E.dataOutputs.find(V=>V.name===P);q||(q=this._createNewSocketConnection(P,!0),E.dataOutputs.push(q)),S.connectedPointIds.push(q.uniqueId),q.connectedPointIds.push(S.uniqueId)}else throw _.Error(["Invalid value for value connection",F]),new Error("Error parsing node connections")}if(f.flowGraphMapping.interBlockConnectors)for(const w of f.flowGraphMapping.interBlockConnectors){const F=w.input,h=w.output,R=w.isVariable;this._connectFlowGraphNodes(F,h,I.blocks[w.inputBlockIndex],I.blocks[w.outputBlockIndex],R)}if(f.flowGraphMapping.extraProcessor){const w=(X=this._interactivityGraph.declarations)==null?void 0:X[b.declaration];if(!w)throw _.Error(["No declaration found for extra processor",b]),new Error("Error parsing node connections");I.blocks=f.flowGraphMapping.extraProcessor(b,w,f.flowGraphMapping,this,I.blocks,t,this._gltf)}}}_createNewSocketConnection(t,o){return{uniqueId:$(),name:t,_connectionType:o?1:0,connectedPointIds:[]}}_connectFlowGraphNodes(t,o,r,e,i){const c=i?r.dataInputs:r.signalInputs,s=i?e.dataOutputs:e.signalOutputs,l=c.find(G=>G.name===t)||this._createNewSocketConnection(t),k=s.find(G=>G.name===o)||this._createNewSocketConnection(o,!0);c.find(G=>G.name===t)||c.push(l),s.find(G=>G.name===o)||s.push(k),l.connectedPointIds.push(k.uniqueId),k.connectedPointIds.push(l.uniqueId)}getVariableName(t){return"staticVariable_"+t}serializeToFlowGraph(){const t={uniqueId:$(),_userVariables:{},_connectionValues:{}};this._parseNodeConnections(t);for(let r=0;r<this._staticVariables.length;r++){const e=this._staticVariables[r];t._userVariables[this.getVariableName(r)]=e}return{rightHanded:!0,allBlocks:this._nodes.reduce((r,e)=>r.concat(e.blocks),[]),executionContexts:[t]}}}const K="KHR_interactivity";class yt{constructor(t){this._loader=t,this.name=K,this.enabled=this._loader.isExtensionUsed(K),this._pathConverter=st(this._loader.gltf),t._skipStartAnimationStep=!0;const o=t.babylonScene;o&&Et(o)}dispose(){this._loader=null,delete this._pathConverter}async onReady(){var i;if(!this._loader.babylonScene||!this._pathConverter)return;const t=this._loader.babylonScene,o=(i=this._loader.gltf.extensions)==null?void 0:i.KHR_interactivity;if(!o)return;const r=new nt({scene:t});r.dispatchEventsSynchronously=!1;const e=o.graphs.map(c=>new dt(c,this._loader.gltf,this._loader).serializeToFlowGraph());await Promise.all(e.map(c=>_t(c,{coordinator:r,pathConverter:this._pathConverter}))),r.start()}}function Et(n){D("/extensions/KHR_interactivity/?/activeCamera/rotation",{get:()=>n.activeCamera?Y.FromRotationMatrix(n.activeCamera.getWorldMatrix()).normalize():new Y(NaN,NaN,NaN,NaN),type:"Quaternion",getTarget:()=>n.activeCamera}),D("/extensions/KHR_interactivity/?/activeCamera/position",{get:()=>n.activeCamera?n.activeCamera.position:new et(NaN,NaN,NaN),type:"Vector3",getTarget:()=>n.activeCamera}),D("/animations/{}/extensions/KHR_interactivity/isPlaying",{get:t=>{var o;return((o=t._babylonAnimationGroup)==null?void 0:o.isPlaying)??!1},type:"boolean",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/minTime",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.from)??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/maxTime",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.to)??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/playhead",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.getCurrentFrame())??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup}),D("/animations/{}/extensions/KHR_interactivity/virtualPlayhead",{get:t=>{var o;return(((o=t._babylonAnimationGroup)==null?void 0:o.getCurrentFrame())??0)/60},type:"number",getTarget:t=>t._babylonAnimationGroup})}pt(K,"FlowGraphGLTFDataProvider",async()=>(await a(async()=>{const{FlowGraphGLTFDataProvider:n}=await import("./flowGraphGLTFDataProvider-CqkuTXD1.js");return{FlowGraphGLTFDataProvider:n}},__vite__mapDeps([3,0,1]))).FlowGraphGLTFDataProvider);ct(K);it(K,!0,n=>new yt(n));export{yt as KHR_interactivity,Et as _AddInteractivityObjectModel};
